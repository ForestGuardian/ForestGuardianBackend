<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Forest Guardian</title>

  <%= javascript_include_tag  'fg_mobile' %>
  <%= stylesheet_link_tag 'fg_mobile', media: 'all' %>

  <!-- Material Design Lite -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
  <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>


  <style>
    #container {
      width: 100%;
      height: 100%;
      position: relative;
    }
    #windyty {
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
    }
    #app-layers-switch {
      width: 50px;
      height: 100%;
      position: absolute;
      bottom: 50px;
      left: 50px;
    }
    #app-layers-switch {
      z-index: 10;
    }
  </style>


</head>

<body>
<div id="container">
  <div id="windyty"></div>
  <div id="app-layers-switch">
    <table>
      <tr>
        <th>

          <%= image_tag 'agua_layer_on.svg', width: 50, height: 50, class: 'status-on' %>
        </th>
      </tr>
      <tr>
        <th>
          <%= image_tag 'lluvia_layer_rain_off.svg', width: 50, height: 50, class: 'status-off' %>
          <%= image_tag 'lluvia_layer_rain_on.svg', width: 50, height: 50, class: 'status-on' %>
        </th>
      </tr>
      <tr>
        <th>
          <%= image_tag 'bosque_layer_off.svg', width: 50, height: 50, class: 'status-off' %>
          <%= image_tag 'bosque_layer_on.svg', width: 50, height: 50, class: 'status-on' %>
        </th>
      </tr>
    </table>
  </div>
</div>

<script>

  function on_custom_checkbox_clicked(elem) {
    let state = !elem.attr('data-checked');
    elem.attr('data-checked', state);

    let nodes = elem.children();
    for(var i=0; i<nodes.length; i++) {
      if ( nodes[i].attr('data-checked') === state ){
          nodes[i].show();
      }else{
          nodes[i].hide();
      }
    }
  }

  function create_custom_checkbox(name) {
      let on_img = `<img src=/images/${name}_on.svg style="width: 50px; height: 50px" data-checked=true />`;
      let off_img = `<img src=/images/${name}_off.svg style="width: 50px; height: 50px" data-checked=false />`;
      return `<div data-checked-name=${name} data-checked=false onclick="on_custom_checkbox_clicked(this)" > ${on_img} ${off_img}  </div>`;
  }

  create_custom_checkbox('agua_layer');
  create_custom_checkbox('lluvia_layer_rain');
  create_custom_checkbox('bosque_layer');

</script>

<script async defer src="https://api.windytv.com/v2.3/boot.js"></script>

</body>

</html>
